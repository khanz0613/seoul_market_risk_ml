# Seoul Market Risk ML System Configuration

# Data Configuration
data:
  raw_data_path: "data/raw"
  processed_data_path: "data/processed"
  external_data_path: "data/external"
  encoding:
    default: "utf-8"
    legacy_2019: "euc-kr"
  
# Model Configuration
models:
  global:
    algorithms: ["prophet", "arima", "lstm"]
    save_path: "src/models/global"
  
  regional:
    num_clusters: 6
    algorithms: ["prophet", "arima", "lightgbm"]
    save_path: "src/models/regional"
  
  local:
    total_models: 72
    algorithms: ["prophet", "logistic_regression", "lightgbm"]
    save_path: "src/models/local"

# Risk Scoring Configuration
risk_scoring:
  weights:
    revenue_change: 0.30    # Most important factor
    volatility: 0.20
    trend: 0.20
    seasonal_deviation: 0.15
    industry_comparison: 0.15
  
  levels:
    level_1: { min: 0, max: 20, label: "안전" }
    level_2: { min: 21, max: 40, label: "주의" }
    level_3: { min: 41, max: 60, label: "경계" }
    level_4: { min: 61, max: 80, label: "위험" }
    level_5: { min: 81, max: 100, label: "매우위험" }
  
  target_score: 15  # Target for risk neutralization

# Changepoint Detection Configuration
changepoint_detection:
  cusum:
    threshold: 0.01
    drift: 0.005
  
  thresholds:
    rapid_increase: 
      consecutive_weeks: 3
      percentage: 0.20
      single_week: 0.35
    rapid_decline:
      consecutive_weeks: 2
      percentage: -0.15
      single_week: -0.25
    volatility_increase:
      window_weeks: 4
      historical_weeks: 12
      multiplier: 1.5

# Clustering Configuration
clustering:
  regional:
    algorithm: "kmeans"
    n_clusters: 6
    features: ["income_level", "foot_traffic", "business_diversity"]
  
  business:
    algorithm: "dtw"
    n_categories: 12
    distance_metric: "dtw"

# Loan Calculation Configuration
loan_calculation:
  business_multipliers:
    "음식점": 2.5
    "소매업": 3.0
    "서비스업": 1.5
    "제조업": 4.0
    "default": 2.0
  
  risk_reduction:
    decay_rates:
      revenue_change: 0.5
      volatility: 0.4
      trend: 0.3
      seasonal_deviation: 0.6
      industry_comparison: 0.4

# LLM Integration Configuration
llm:
  model: "gpt-4"
  max_tokens:
    summary: 200
    detailed: 1000
  
  report_structure:
    summary_template: "🎯 위험도: {level} ({score}점)\n📊 매출 전망: {forecast}\n⚠️ 주요 원인: {factors}\n💡 추천: {recommendation}"

# External API Configuration
external_apis:
  weather:
    base_url: "https://apis.data.go.kr/1360000/VilageFcstInfoService_2.0"
    service_key: "${WEATHER_API_KEY}"
  
  holidays:
    base_url: "https://apis.data.go.kr/B090041/openapi/service/SpcdeInfoService"
    service_key: "${HOLIDAY_API_KEY}"
  
  economic:
    base_url: "https://ecos.bok.or.kr/api"
    service_key: "${ECOS_API_KEY}"

# Logging Configuration
logging:
  level: "INFO"
  format: "%(asctime)s | %(levelname)s | %(name)s | %(message)s"
  file_path: "logs/seoul_market_risk.log"
  rotation: "1 week"
  retention: "1 month"

# Performance Configuration
performance:
  batch_size: 1000
  n_jobs: -1  # Use all available cores
  memory_limit: "8GB"